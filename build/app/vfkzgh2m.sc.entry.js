const t=window.App.h;import{a as e,b as s}from"./chunk-68aaa451.js";import{a as r}from"./chunk-5bbbce5c.js";class a{render(){return t("div",null,t("a",{onClick:()=>this.pageDecrement.emit()},"Prev"),t("span",null,this.page+1,"/",this.max),t("a",{onClick:()=>this.pageIncrement.emit()},"Next"))}static get is(){return"app-list-nav"}static get encapsulation(){return"shadow"}static get properties(){return{max:{type:Number,attr:"max"},page:{type:Number,attr:"page"}}}static get events(){return[{name:"pageIncrement",method:"pageIncrement",bubbles:!0,cancelable:!0,composed:!0},{name:"pageDecrement",method:"pageDecrement",bubbles:!0,cancelable:!0,composed:!0}]}static get style(){return"div.sc-app-list-nav{position:fixed;top:56px;left:0;display:-ms-flexbox;display:flex;-ms-flex-pack:center;justify-content:center;-ms-flex-align:center;align-items:center;padding:15px 0;background-color:#fff;width:100%;-webkit-box-shadow:0 1px 2px rgba(0,0,0,.1);box-shadow:0 1px 2px rgba(0,0,0,.1);z-index:900}a.sc-app-list-nav{cursor:pointer}span.sc-app-list-nav{margin:0 16px}"}}class i{constructor(){this.getCurrentPage=(()=>this.match.params.page?parseInt(this.match.params.page):0),this.urlHN=(t=>`https://hacker-news.firebaseio.com/v0/${t}.json?print=pretty`)}watchMatchHandler(t,e){t.params.stories!==e.params.stories&&this.fetchStories(this.getStoriesType())}async componentWillLoad(){await this.fetchStories(this.getStoriesType())}getStoriesType(){let t;switch(this.match.params.stories){case"top":t="topstories";break;case"new":t="newstories";break;case"show":t="showstories";break;case"ask":t="askstories";break;case"job":t="jobstories";break;default:t="topstories"}return t}async fetchStories(t){const e=await fetch(this.urlHN(t)).then(t=>t.json()),s=[e.slice(0,30)];for(let t=1;t<Math.floor(e.length/30);t++)s.push(e.slice(30*t,30*t+30));this.stories=s}incrementPage(){console.log("increment");let t=this.getCurrentPage()+1;t<2?t=2:t>25&&(t=25),this.history.replace(`/${this.match.params.stories}/${t}`)}decrementPage(){console.log("decrement");let t=this.getCurrentPage()-1;this.history.replace(t<2?`/${this.match.params.stories}`:`/${this.match.params.stories}/${t}`)}render(){let e=Math.max(this.getCurrentPage()-1,0);return t("div",{class:"column stories-container"},t("app-list-nav",{page:e,max:this.stories.length}),t("ul",null,this.stories[e].map(e=>t("app-story",{storyId:e,key:e}))))}static get is(){return"app-stories"}static get properties(){return{history:{type:"Any",attr:"history"},match:{type:"Any",attr:"match",watchCallbacks:["watchMatchHandler"]},stories:{state:!0}}}static get listeners(){return[{name:"pageIncrement",method:"incrementPage"},{name:"pageDecrement",method:"decrementPage"}]}static get style(){return".column{margin:0 auto;width:100%}.mobile-only{display:inline-block}.desktop-only{display:none}\@media screen and (min-width:800px){.column{max-width:800px}.mobile-only{display:none}.desktop-only{display:inline-block}}.stories-container{padding-top:51px}ul{margin:6px 0;padding:0;-webkit-transition:margin .4s;transition:margin .4s}\@media screen and (min-width:800px){ul{margin:20px 0}}"}}class n{async componentWillLoad(){const t=await fetch(`https://hacker-news.firebaseio.com/v0/item/${this.storyId}.json?print=pretty`),r=await t.json();this.storyObject=r,e.extend(s),this.relativeTime=e(1e3*r.time).fromNow()}render(){return t("li",null,t("span",{class:"score"},this.storyObject.score),t("span",null,t("a",{href:this.storyObject.url||`/item/${this.storyId}`},this.storyObject.title),this.storyObject.url?t("span",{class:"meta"}," (",r(this.storyObject.url),")"):null),t("br",null),t("span",{class:"meta"},t("span",null,"by ",t("stencil-route-link",{url:`/user/${this.storyObject.by}`},this.storyObject.by)),t("span",null," ",this.relativeTime),t("span",null," | ",t("stencil-route-link",{url:`/item/${this.storyId}`},this.storyObject.descendants," comments"))))}static get is(){return"app-story"}static get encapsulation(){return"shadow"}static get properties(){return{relativeTime:{state:!0},storyId:{type:Number,attr:"story-id"},storyObject:{state:!0}}}static get style(){return"li.sc-app-story{position:relative;background-color:#fff;padding:20px 20px 20px 80px;list-style-type:none;-webkit-box-sizing:border-box;box-sizing:border-box;border-bottom:1px solid #eee;-webkit-box-shadow:0 1px 2px rgba(0,0,0,.1);box-shadow:0 1px 2px rgba(0,0,0,.1)}.score.sc-app-story{position:absolute;left:0;top:50%;width:80px;text-align:center;margin-top:-10px;color:var(--primary-color);font-weight:700;font-size:1.1em}span.sc-app-story   a.sc-app-story{color:#000;text-decoration:none}.meta.sc-app-story{font-size:.8em;color:#7d7d7d}stencil-route-link.sc-app-story   a.sc-app-story{color:#7d7d7d;text-decoration:underline;-webkit-transition:color .1s;transition:color .1s}stencil-route-link.sc-app-story   a.sc-app-story:hover{color:var(--primary-color)}"}}export{a as AppListNav,i as AppStories,n as AppStory};